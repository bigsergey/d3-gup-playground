general update pattern util for d3

(it's public because I'm cheap, not because you should use it now)
